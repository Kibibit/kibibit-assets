<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OpenAI Status (Unofficial)</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; }
    .banner { background: #fff8e5; border: 1px solid #f4d98c; padding: 1rem; border-radius: 6px; }
    .banner h2 { margin: 0 0 .5rem; color: #c78100; }
    ul { list-style: none; padding: 0; }
    li { margin: .75rem 0; padding: .75rem; border-bottom: 1px solid #eee; }
    .date { font-size: .8rem; color: #666; }
  </style>
</head>
<body>
  <div class="banner">
    <h2>OpenAI Status</h2>
    <div id="current">Loading...</div>
  </div>
  <h3>Recent Incidents</h3>
  <ul id="history"></ul>

  <script>
    async function loadStatus() {
      const feedUrl = "https://status.openai.com/feed.rss";
      const proxied = "https://api.allorigins.win/raw?url=" + encodeURIComponent(feedUrl);

      const xmlText = await (await fetch(proxied)).text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "application/xml");
      const items = Array.from(xml.querySelectorAll("item"));

      if (!items.length) {
        document.getElementById("current").innerText = "Could not load feed.";
        return;
      }

      // First item = current banner
      const latest = items[0];
      const title = latest.querySelector("title").textContent;
      const desc = latest.querySelector("description").textContent;
      document.getElementById("current").innerHTML =
        `<strong>${title}</strong><br>${desc}`;

      // Rest as history
      const list = document.getElementById("history");
      items.slice(0, 6).forEach(item => {
        const title = item.querySelector("title").textContent;
        const link = item.querySelector("link").textContent;
        const date = new Date(item.querySelector("pubDate").textContent).toLocaleString();
        list.innerHTML += `<li>
            <a href="${link}" target="_blank">${title}</a>
            <div class="date">${date}</div>
          </li>`;
      });
    }

    loadStatus();
  </script>
</body>
</html>
